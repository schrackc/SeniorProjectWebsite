<!DOCTYPE html>
<script type="module" src="firebaseLoginFunctions.js"></script>
<html lang="en" style="visibility: hidden;" id="webpage" >
  <head>
    <title>Scan-A-Lot Management</title>
    <link rel="icon" type="image/x-icon" href="Images/logo.webp"/>
    <link rel="stylesheet" href="data-table.css">
    <script src="data-table.js"></script>
  </head>

  <body onload="openTable(event, 'Tickets')">
    <!--Header-->
    <div class="header">
      <a class="imgcontainer">
        <img src="Images/logo.webp" alt="Scan-A-Lot" class="avatar">
      </a>
      <a class="logoutButton" id="logoutButton">
        <button id = "logout">Logout</button>
      </a>
    </div>
    <h2>Scan-A-Lot Management</h2>
    
    <!--Tab Buttons to Select Table View-->
    <div class="tab">
      <button class="tablinks" onclick="openTable(event, 'Tickets')">Tickets</button>
      <button class="tablinks" onclick="openTable(event, 'Vehicles')">Vehicles</button>
      <button class="tablinks" onclick="openTable(event, 'Officers')">Officers</button>
      <button class="tablinks" onclick="openTable(event, 'Parking Lot')">Parking Lot</button>
      <button class="tablinks" onclick="openTable(event, 'Offense')">Offense</button>
    </div>

    <!--Ticket Table-->
    <div id="Tickets" class="tabContent" onload="openTable(event, 'Tickets')">
      <h3>
        <p>Tickets</p>
      </h3>
        <p><table>
          <tr>
            <th>
              <p>Ticket Number</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Time</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Officer</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Parking Lot</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Car Make</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Car Model</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>License Number</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Offense</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Fine Amount</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Void</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
          </tr>
          <tr>
            <td>1111</td>
            <td>22:34</td>
            <td>Davis</td>
            <td>Lot C</td>
            <td>Honda</td>
            <td>Civic</td>
            <td>XXXX-0000</td>
            <td>XXX</td>
          </tr>
          <tr>
            <td>2222</td>
            <td>12:53</td>
            <td>Davis</td>
            <td>Lot F</td>
            <td>Toyota</td>
            <td>Avalon</td>
            <td>XXXX-0000</td>
            <td>XXX</td>
          </tr>
          <tr>
            <td>3333</td>
            <td>1:04</td>
            <td>Humfry</td>
            <td>Lot B</td>
            <td>Tesla</td>
            <td>Model B</td>
            <td>XXXX-0000</td>
            <td>XXX</td>
          </tr>
          <tr>
            <td>4444</td>
            <td>13:57</td>
            <td>Humfry</td>
            <td>Lot H</td>
            <td>Kia</td>
            <td>Forte</td>
            <td>XXXX-0000</td>
            <td>XXX</td>
          </tr>
          <tr>
            <td>5555</td>
            <td>4:36</td>
            <td>Humfry</td>
            <td>Lot E</td>
            <td>Chevrolet</td>
            <td>Malibu</td>
            <td>XXXX-0000</td>
            <td>XXX</td>
          </tr>
        </table>
        </p>
    </div>
    
    <!--Vehicle Table-->
    <div id="Vehicles" class="tabContent">
      <h3>
        <p>Vehicles</p>
        <!--Add New Vehicle Button-->
        <button class="tableTools">Add Vehicle</button>
      </h3>
      <p>
        <table>
        <tr>
          <th>
            <p>ID</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>Owner First Name</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>Owner Last Name</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>Car Make</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>Car Model</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>License</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
        </tr>
        <tr>
          <td>03456</td>
          <td>John</td>
          <td>Smith</td>
          <td>Honda</td>
          <td>Civic</td>
          <td>XXXX-0000</td>
        </tr>
        <tr>
          <td>03487</td>
          <td>Joan</td>
          <td>Johnson</td>
          <td>Toyota</td>
          <td>Avalon</td>
          <td>XXXX-0000</td>
        </tr>
        <tr>
          <td>03321</td>
          <td>Jake</td>
          <td>Albot</td>
          <td>Tesla</td>
          <td>Model B</td>
          <td>XXXX-0000</td>
        </tr>
        <tr>
          <td>03321</td>
          <td>Jake</td>
          <td>Albot</td>
          <td>Kia</td>
          <td>Forte</td>
          <td>XXXX-0000</td>
        </tr>
        <tr>
          <td>03401</td>
          <td>Jess</td>
          <td>Hamilton</td>
          <td>Chevrolet</td>
          <td>Malibu</td>
          <td>XXXX-0000</td>
        </tr>
      </table>
    </p> 
    </div>

    
    <!--Officer Table-->
    
    <div id="Officers" class="tabContent">
      <h3>
        <p>Officers</p>
        <!--Add New Vehicle Button-->
        <button class="tableTools">Add Officer</button>
      </h3>
    <table  class="table table-dark">
      <thead>
        <th>Last Name</th> 
        <th>First Name</th> 
        <th>Username</th>   
        <th>Email</th> 
      </thead>
      <tbody id="tbody1"></tbody>
    </table> 
  </div>
  
  
  
       <!--Firestore Libraries-->
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>     
  
  
        <script id="MainScript">
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig2 = {
    apiKey: "AIzaSyDIEtCfoSgt-Ka56fFwouFDvEXId0Xrk78",
    authDomain: "scan-a-lot.firebaseapp.com",
    databaseURL: "https://scan-a-lot-default-rtdb.firebaseio.com",
    projectId: "scan-a-lot",
    storageBucket: "scan-a-lot.appspot.com",
    messagingSenderId: "816922417821",
    appId: "1:816922417821:web:ba0a3811f84a8cbbacd274",
    measurementId: "G-LVFHL8LFNV"
  };
        firebase.initializeApp(firebaseConfig2);
        let db= firebase.firestore();
        
        
  
      //Get data
      function getAllDataOnce(){
        db.collection("Officers").get().then((querySnapshot)=>{
          var Officers = [];
          querySnapshot.forEach(doc => {
            Officers.push(doc.data());
          });
          AddAllItemsToTheTable(Officers);
        });
      }
  
    
      function getAllDataRealTime(){
        db.collection("Officers").onSnapshot((querySnapshot)=>{
          var Officers = [];
          querySnapshot.forEach(doc => {
            Officers.push(doc.data());
          });
  
          AddAllItemsToTheTable(Officers);
        });
      }
     
        //filling the table
        var offNo = 0;
        var tbody = document.getElementById("tbody1");
  
        function AddItemToTable(LastName, FirstName, Username, Email){
          var trow = document.createElement('tr');
          var td1 = document.createElement('td');
          var td2 = document.createElement('td');
          var td3 = document.createElement('td');
          var td4 = document.createElement('td');
  
          //td1.innerHTML = ++offNo;
          
          td1.innerHTML = LastName;
          td2.innerHTML = FirstName;
          td3.innerHTML = Username;
          td4.innerHTML = Email;
  
          trow.appendChild(td1);
          trow.appendChild(td2);
          trow.appendChild(td3);
          trow.appendChild(td4);
  
          tbody.appendChild(trow);
        }
        function AddAllItemsToTheTable(OfficerDocList){
          offNo=0;
          tbody.innerHTML="";
          OfficerDocList.forEach(element => {
            AddItemToTable(element.LastName, element.FirstName, element.Username, element.Email);
            
          });
  
        }
          //Once window loads it gets data from firestore
      window.onload = getAllDataOnce;
    
    </script>
   
  

    <!--Parking Lot Table-->
    <div id="Parking Lot" class="tabContent">
      <h3>
        <p>Parking Lot</p>
        <!--New Parking Lot Button-->
        <button class="tableTools">Add Parking Lot</button>
      </h3>
      <p>
        <table>
          <tr>
            <th>
                <p>Parking Lot</p>
                <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>

            <th>
              <p>Max Longitude</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
                <p>Min Longitude</p>
                <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Max Latitude</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
            <th>
              <p>Min Latitude</p>
              <img src="Images/FilterIcon.webp", class="filter"></img>
            </th>
          </tr>
          <tr>
            <td>Lot F</td>
            <td>1000.02</td>
            <td>1000.0001</td>
            <td>75.89</td>
            <td>75.80</td>
          </tr>
        </table>
      </p> 
    </div>

    <!--Officer Table-->
    <div id="Offense" class="tabContent">        
      <h3>
        <p>Offense</p>
        <!--Add New Offense Button-->
        <button class="tableTools">Add Offense</button>
      </h3>
      <p>
       <table>
        <tr>
          <th>
            <p>Offense</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
          <th>
            <p>Fine Amount</p>
            <img src="Images/FilterIcon.webp", class="filter"></img>
          </th>
        </tr>
        <tr>
          <td>Invalid Pass</td>
          <td>$30.00</td>
        </tr>
        <tr>
          <td>No Pass</td>
          <td>$50.00</td>
        </tr>
        <tr>
          <td>Parked in Handicap</td>
          <td>$75.00</td>
        </tr>
        <tr>
          <td>Parked in Fire Lane</td>
          <td>$1000.00</td>
          <td>
            <div class="dropdown">
              <button class="dropbtn">Modify</button>
              <div class="dropdown-content">
                <a href="#">Edit</a>
                <a href="#">Delete</a>
              </div>
          </td>
          
        </tr>
        <tr>
          <td>Boot</td>
          <td>$150.00</td>
          <td>
            <!--<div class="dropdown">
              <div class="select">
                <span class="selected">E/D</span>
                <div class="caret"></div>
              </div> -->
              <div class="dropdown">
                <button class="dropbtn">Modify</button>
                <div class="dropdown-content">
                  <a href="#">Edit</a>
                  <a href="#">Delete</a>
                </div>
              </div>
              <ul class="menu">
                <li>Edit</li>
                <li>Delete</li>
              </ul>
            </div>
          </td>
        </tr>
      </table>
    </p>
    </div>
  </body>
</html>
    


